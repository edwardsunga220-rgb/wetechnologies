{% extends 'base.html' %}
{% load static %}

{% block title %}Our Portfolio - WeTech{% endblock %}

{% block content %}
<!-- 1. Hero -->
<section class="page-hero">
    <div class="hero-text-center">
        <span class="hero-badge"><i class="bi bi-briefcase-fill"></i> Case Studies</span>
        <h1>Engineered <span class="text-gradient">Success</span></h1>
        <p>See how we've helped founders transform ideas into revenue-generating platforms.</p>
    </div>
</section>

<!-- 2. Impact Stats -->
<section class="impact-stats" style="margin-bottom: 30px;">
    <div class="intro-metrics">
        <div class="metric-item">
            <span class="metric-value">$50</span><span class="metric-suffix">M+</span>
            <span class="metric-label">Client Revenue</span>
        </div>
        <div class="metric-divider"></div>
        <div class="metric-item">
            <span class="metric-value">2.5</span><span class="metric-suffix">M+</span>
            <span class="metric-label">End Users</span>
        </div>
        <div class="metric-divider"></div>
        <div class="metric-item">
            <span class="metric-value">12</span><span class="metric-suffix">Countries</span>
            <span class="metric-label">Global Deployment</span>
        </div>
    </div>
</section>

<!-- 3. Featured Project (Dynamic) -->
{% if projects %}
{% with featured=projects.0 %}
<section class="featured-project">
    <div class="glass-card project-card-large">
        <div class="project-info">
            <span class="project-cat">
                <i class="bi bi-star-fill" style="color: #f39c12;"></i> Featured • {{ featured.get_category_display }}
            </span>
            <h2>{{ featured.title }}</h2>
            <p>{{ featured.description|truncatewords:40 }}</p>
            
            <ul class="project-stats" style="list-style: none; padding: 0; margin: 20px 0;">
                <li style="margin-bottom: 10px;">
                    <i class="bi bi-person-check-fill" style="color: var(--primary); margin-right: 10px;"></i> 
                    Client: <strong>{{ featured.client_name }}</strong>
                </li>
                <li>
                    <i class="bi bi-calendar-check" style="color: var(--primary); margin-right: 10px;"></i> 
                    Launched: <strong>{{ featured.completed_date|date:"M Y" }}</strong>
                </li>
            </ul>
            
            <div style="display: flex; gap: 15px; margin-top: 20px;">
                <!-- Link to Internal Detail Page (Gallery) -->
                <a href="{% url 'project_detail' featured.id %}" class="btn-primary">
                    Read Case Study <i class="bi bi-arrow-right"></i>
                </a>
                
                {% if featured.live_link %}
                <a href="{{ featured.live_link }}" target="_blank" class="btn-secondary">
                    Live Demo <i class="bi bi-box-arrow-up-right"></i>
                </a>
                {% endif %}
            </div>
        </div>
        
        <!-- Featured Image -->
        <div class="project-image">
            <div class="mockup-bg" style="width:100%; height:100%; border-radius:12px; overflow: hidden; position: relative;">
                <img src="{{ featured.image.url }}" alt="{{ featured.title }}" style="width: 100%; height: 100%; object-fit: cover;">
                <div style="position: absolute; inset: 0; background: linear-gradient(135deg, rgba(0, 240, 255, 0.1), rgba(255, 0, 212, 0.1));"></div>
            </div>
        </div>
    </div>
</section>
{% endwith %}
{% endif %}

<!-- 3.5. Interactive Stats Visualization -->
<section class="stats-visualization section-spacing">
    <div class="section-header" style="text-align: center; margin-bottom: 50px;">
        <h2 class="section-title">Portfolio <span class="text-gradient">Analytics</span></h2>
        <p style="color: rgba(255,255,255,0.6); margin-top: 10px;">Visual insights into our project portfolio</p>
    </div>
    <div class="stats-charts-grid">
        <div class="chart-card glass-card">
            <h4>Projects by Category</h4>
            <div class="chart-container">
                <canvas id="categoryChart"></canvas>
            </div>
        </div>
        <div class="chart-card glass-card">
            <h4>Technology Distribution</h4>
            <div class="chart-container">
                <canvas id="techChart"></canvas>
            </div>
        </div>
        <div class="chart-card glass-card">
            <h4>Projects by Year</h4>
            <div class="chart-container">
                <canvas id="yearChart"></canvas>
            </div>
        </div>
        <div class="chart-card glass-card">
            <h4>Global Reach</h4>
            <div class="map-visualization">
                <div class="map-stats">
                    <div class="map-stat-item">
                        <i class="bi bi-globe"></i>
                        <span class="stat-value">12</span>
                        <span class="stat-label">Countries</span>
                    </div>
                    <div class="map-stat-item">
                        <i class="bi bi-cloud"></i>
                        <span class="stat-value">50+</span>
                        <span class="stat-label">Deployments</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- 3.6. ROI & Impact Showcase -->
<section class="roi-impact section-spacing">
    <div class="section-header" style="text-align: center; margin-bottom: 50px;">
        <h2 class="section-title">Business <span class="text-gradient">Impact</span></h2>
        <p style="color: rgba(255,255,255,0.6); margin-top: 10px;">Measurable results that drive growth</p>
    </div>
    <div class="roi-grid">
        <div class="roi-card glass-card">
            <div class="roi-icon">
                <i class="bi bi-graph-up-arrow"></i>
            </div>
            <h3>Revenue Growth</h3>
            <div class="roi-value">$50M+</div>
            <p class="roi-description">Total revenue generated by our clients</p>
            <div class="roi-bar">
                <div class="roi-bar-fill" style="width: 95%;"></div>
            </div>
        </div>
        <div class="roi-card glass-card">
            <div class="roi-icon">
                <i class="bi bi-people-fill"></i>
            </div>
            <h3>User Growth</h3>
            <div class="roi-value">2.5M+</div>
            <p class="roi-description">Active users across all platforms</p>
            <div class="roi-bar">
                <div class="roi-bar-fill" style="width: 88%;"></div>
            </div>
        </div>
        <div class="roi-card glass-card">
            <div class="roi-icon">
                <i class="bi bi-lightning-charge"></i>
            </div>
            <h3>Performance</h3>
            <div class="roi-value">99.9%</div>
            <p class="roi-description">Average uptime across all deployments</p>
            <div class="roi-bar">
                <div class="roi-bar-fill" style="width: 99.9%;"></div>
            </div>
        </div>
        <div class="roi-card glass-card">
            <div class="roi-icon">
                <i class="bi bi-currency-dollar"></i>
            </div>
            <h3>Cost Savings</h3>
            <div class="roi-value">40%</div>
            <p class="roi-description">Average infrastructure cost reduction</p>
            <div class="roi-bar">
                <div class="roi-bar-fill" style="width: 75%;"></div>
            </div>
        </div>
    </div>
</section>

<!-- 3.7. Client Logos Carousel -->
<section class="client-logos section-spacing">
    <div class="section-header" style="text-align: center; margin-bottom: 50px;">
        <h2 class="section-title">Trusted by <span class="text-gradient">Innovators</span></h2>
        <p style="color: rgba(255,255,255,0.6); margin-top: 10px;">We've partnered with leading companies worldwide</p>
    </div>
    <div class="logos-carousel-wrapper">
        <div class="logos-carousel">
            <div class="logo-item glass-card">
                <div class="logo-placeholder">
                    <i class="bi bi-building"></i>
                    <span>TechCorp</span>
                </div>
            </div>
            <div class="logo-item glass-card">
                <div class="logo-placeholder">
                    <i class="bi bi-building"></i>
                    <span>StartupHub</span>
                </div>
            </div>
            <div class="logo-item glass-card">
                <div class="logo-placeholder">
                    <i class="bi bi-building"></i>
                    <span>InnovateLab</span>
                </div>
            </div>
            <div class="logo-item glass-card">
                <div class="logo-placeholder">
                    <i class="bi bi-building"></i>
                    <span>DigitalFlow</span>
                </div>
            </div>
            <div class="logo-item glass-card">
                <div class="logo-placeholder">
                    <i class="bi bi-building"></i>
                    <span>CloudTech</span>
                </div>
            </div>
            <div class="logo-item glass-card">
                <div class="logo-placeholder">
                    <i class="bi bi-building"></i>
                    <span>NextGen</span>
                </div>
            </div>
            <div class="logo-item glass-card">
                <div class="logo-placeholder">
                    <i class="bi bi-building"></i>
                    <span>ScaleUp</span>
                </div>
            </div>
            <div class="logo-item glass-card">
                <div class="logo-placeholder">
                    <i class="bi bi-building"></i>
                    <span>PrimeSoft</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- 3.8. Interactive Project Timeline -->
<section class="project-timeline-section section-spacing">
    <div class="section-header" style="text-align: center; margin-bottom: 50px;">
        <h2 class="section-title">Project <span class="text-gradient">Timeline</span></h2>
        <p style="color: rgba(255,255,255,0.6); margin-top: 10px;">Our journey of innovation through the years</p>
    </div>
    <div class="timeline-container">
        <div class="timeline-line"></div>
        {% if projects %}
            {% for project in projects|slice:":6" %}
            <div class="timeline-item" data-year="{{ project.completed_date|date:'Y' }}">
                <div class="timeline-marker">
                    <div class="marker-dot"></div>
                    <div class="marker-pulse"></div>
                </div>
                <div class="timeline-content glass-card">
                    <div class="timeline-date">{{ project.completed_date|date:"M Y" }}</div>
                    <h4>{{ project.title }}</h4>
                    <p>{{ project.description|truncatewords:20 }}</p>
                    <a href="{% url 'project_detail' project.id %}" class="timeline-link">View Project <i class="bi bi-arrow-right"></i></a>
                </div>
            </div>
            {% endfor %}
        {% endif %}
    </div>
</section>

<!-- 3.9. Industry Showcase Grid -->
<section class="industry-showcase section-spacing">
    <div class="section-header" style="text-align: center; margin-bottom: 50px;">
        <h2 class="section-title">Industry <span class="text-gradient">Expertise</span></h2>
        <p style="color: rgba(255,255,255,0.6); margin-top: 10px;">Solutions tailored to specific industries</p>
    </div>
    <div class="industry-grid">
        <div class="industry-card glass-card" data-industry="fintech">
            <div class="industry-icon">
                <i class="bi bi-currency-exchange"></i>
            </div>
            <h3>FinTech</h3>
            <p>Secure, scalable financial platforms with real-time transaction processing</p>
            <div class="industry-stats">
                <span class="industry-count">8 Projects</span>
                <span class="industry-separator">•</span>
                <span class="industry-metric">$25M+ Revenue</span>
            </div>
        </div>
        <div class="industry-card glass-card" data-industry="healthcare">
            <div class="industry-icon">
                <i class="bi bi-heart-pulse"></i>
            </div>
            <h3>Healthcare</h3>
            <p>HIPAA-compliant systems for patient management and telemedicine</p>
            <div class="industry-stats">
                <span class="industry-count">6 Projects</span>
                <span class="industry-separator">•</span>
                <span class="industry-metric">500K+ Users</span>
            </div>
        </div>
        <div class="industry-card glass-card" data-industry="ecommerce">
            <div class="industry-icon">
                <i class="bi bi-cart-check"></i>
            </div>
            <h3>E-commerce</h3>
            <p>High-performance online stores with seamless payment integration</p>
            <div class="industry-stats">
                <span class="industry-count">10 Projects</span>
                <span class="industry-separator">•</span>
                <span class="industry-metric">$15M+ Revenue</span>
            </div>
        </div>
        <div class="industry-card glass-card" data-industry="saas">
            <div class="industry-icon">
                <i class="bi bi-cloud"></i>
            </div>
            <h3>SaaS</h3>
            <p>Subscription-based platforms with multi-tenant architecture</p>
            <div class="industry-stats">
                <span class="industry-count">12 Projects</span>
                <span class="industry-separator">•</span>
                <span class="industry-metric">1M+ Users</span>
            </div>
        </div>
        <div class="industry-card glass-card" data-industry="education">
            <div class="industry-icon">
                <i class="bi bi-book"></i>
            </div>
            <h3>Education</h3>
            <p>Learning management systems and educational platforms</p>
            <div class="industry-stats">
                <span class="industry-count">5 Projects</span>
                <span class="industry-separator">•</span>
                <span class="industry-metric">200K+ Users</span>
            </div>
        </div>
    </div>
</section>

<!-- 4. Filterable Grid -->
<section class="portfolio-grid-section section-spacing">
    <div class="section-header" style="text-align: center; margin-bottom: 50px;">
        <h2 class="section-title">Our <span class="text-gradient">Portfolio</span></h2>
        <p style="color: rgba(255,255,255,0.6); margin-top: 10px;">Explore our collection of successful projects</p>
    </div>

    <!-- Filter Buttons -->
    <div class="filter-buttons enhanced-filters">
        <button class="filter-btn active" data-filter="all" onclick="filterGallery('all', this)">
            <i class="bi bi-grid-3x3-gap"></i>
            <span>All Work</span>
        </button>
        <button class="filter-btn" data-filter="web" onclick="filterGallery('web', this)">
            <i class="bi bi-laptop"></i>
            <span>Web Systems</span>
        </button>
        <button class="filter-btn" data-filter="mobile" onclick="filterGallery('mobile', this)">
            <i class="bi bi-phone"></i>
            <span>Mobile Apps</span>
        </button>
        <button class="filter-btn" data-filter="backend" onclick="filterGallery('backend', this)">
            <i class="bi bi-server"></i>
            <span>Backend API</span>
        </button>
    </div>

    <!-- Search & Advanced Filters -->
    <div class="portfolio-controls">
        <div class="search-wrapper">
            <i class="bi bi-search"></i>
            <input type="text" id="project-search" placeholder="Search projects..." class="search-input">
        </div>
        <div class="advanced-filters">
            <select id="industry-filter" class="filter-select" aria-label="Filter by industry">
                <option value="all">All Industries</option>
                <option value="fintech">FinTech</option>
                <option value="healthcare">Healthcare</option>
                <option value="ecommerce">E-commerce</option>
                <option value="saas">SaaS</option>
                <option value="education">Education</option>
            </select>
            <select id="tech-filter" class="filter-select" aria-label="Filter by technology">
                <option value="all">All Technologies</option>
                <option value="python">Python</option>
                <option value="django">Django</option>
                <option value="flutter">Flutter</option>
                <option value="react">React</option>
                <option value="node">Node.js</option>
            </select>
            <select id="year-filter" class="filter-select" aria-label="Filter by year">
                <option value="all">All Years</option>
                <option value="2025">2025</option>
                <option value="2024">2024</option>
                <option value="2023">2023</option>
            </select>
        </div>
    </div>

    <!-- View Mode Toggle -->
    <div class="view-toggle-wrapper">
        <div class="view-toggle">
            <button class="view-btn active" data-view="grid" onclick="setViewMode('grid', this)">
                <i class="bi bi-grid-3x3"></i> Grid
            </button>
            <button class="view-btn" data-view="masonry" onclick="setViewMode('masonry', this)">
                <i class="bi bi-grid"></i> Masonry
            </button>
            <button class="view-btn" data-view="list" onclick="setViewMode('list', this)">
                <i class="bi bi-list-ul"></i> List
            </button>
            <button class="view-btn" onclick="toggleComparisonMode()" id="enable-compare-btn">
                <i class="bi bi-arrow-left-right"></i> Compare Mode
            </button>
        </div>
        <div class="comparison-controls" id="comparison-controls" style="display: none;">
            <span id="compare-count">0 selected</span>
            <button onclick="toggleComparisonMode()" class="btn-secondary btn-sm" id="toggle-comparison-btn">Exit Compare</button>
            <button onclick="openComparisonModal()" class="btn-primary btn-sm" id="open-comparison-btn" style="display: none;">Compare Selected</button>
        </div>
    </div>

    <div class="gallery-grid enhanced-gallery" id="gallery-container">
        {% for project in projects %}
        <!-- Project Card with Enhanced Data Attributes -->
        <div class="gallery-item glass-card enhanced-gallery-item" 
             data-category="{{ project.category }}"
             data-industry="{% cycle 'fintech' 'healthcare' 'ecommerce' 'saas' 'education' %}"
             data-tech="{% cycle 'python,django' 'flutter' 'django,react' 'python,node' 'django,flutter' %}"
             data-year="{{ project.completed_date|date:'Y' }}"
             data-tags="{% cycle 'scalable,enterprise' 'startup,award-winning' 'scalable' 'enterprise' 'startup' %}"
             data-users="{% cycle '250K' '1.2M' '500K' '800K' '150K' %}"
             data-revenue="{% cycle '$5M+' '$12M+' '$8M+' '$15M+' '$3M+' %}"
             data-performance="{% cycle '99.9%' '99.8%' '99.95%' '99.9%' '99.7%' %}"
             data-project-id="{{ project.id }}"
             data-project-title="{{ project.title }}"
             data-project-client="{{ project.client_name }}"
             data-project-description="{{ project.description }}"
             data-project-date="{{ project.completed_date|date:'M Y' }}"
             data-project-link="{% url 'project_detail' project.id %}"
             data-project-image="{{ project.image.url }}"
             onclick="handleProjectClick(event, this)">
            <div class="gallery-image-wrapper">
                <img src="{{ project.image.url }}" alt="{{ project.title }}" class="gallery-img">
                <div class="gallery-category-badge">
                    {% if project.category == 'mobile' %}<i class="bi bi-phone"></i>
                    {% elif project.category == 'web' %}<i class="bi bi-laptop"></i>
                    {% else %}<i class="bi bi-server"></i>{% endif %}
                </div>
                <!-- Project Tags -->
                <div class="project-tags">
                    {% cycle '<span class="tag-tag scalable">Scalable</span><span class="tag-tag enterprise">Enterprise</span>' '<span class="tag-tag startup">Startup</span><span class="tag-tag award">Award-Winning</span>' '<span class="tag-tag scalable">Scalable</span>' '<span class="tag-tag enterprise">Enterprise</span>' '<span class="tag-tag startup">Startup</span>' %}
                </div>
                <!-- Tech Stack Tags -->
                <div class="tech-stack-tags">
                    {% if forloop.counter0|divisibleby:2 %}
                        <span class="tech-tag"><i class="bi bi-code-slash"></i> Python</span>
                        <span class="tech-tag"><i class="bi bi-gear"></i> Django</span>
                    {% elif forloop.counter0|divisibleby:3 %}
                        <span class="tech-tag"><i class="bi bi-phone"></i> Flutter</span>
                    {% else %}
                        <span class="tech-tag"><i class="bi bi-gear"></i> Django</span>
                        <span class="tech-tag"><i class="bi bi-lightning"></i> React</span>
                    {% endif %}
                </div>
                <!-- Comparison Checkbox (shown in comparison mode) -->
                <div class="comparison-checkbox" style="display: none;">
                    <input type="checkbox" class="compare-check" onchange="updateComparison(this)">
                </div>
            </div>
            <div class="gallery-overlay enhanced-overlay">
                <div class="overlay-content">
                    <div class="overlay-top">
                        <h4>{{ project.title }}</h4>
                        <p class="client-name">{{ project.client_name }}</p>
                        <!-- Quick Metrics Preview -->
                        <div class="quick-metrics">
                            <div class="quick-metric">
                                <i class="bi bi-people"></i>
                                <span class="metric-value" data-metric="users">{% cycle '250K' '1.2M' '500K' '800K' '150K' %}</span>
                            </div>
                            <div class="quick-metric">
                                <i class="bi bi-graph-up"></i>
                                <span class="metric-value" data-metric="revenue">{% cycle '$5M+' '$12M+' '$8M+' '$15M+' '$3M+' %}</span>
                            </div>
                        </div>
                    </div>
                    <div class="overlay-bottom">
                        <span class="view-link" data-project-id="{{ project.id }}" onclick="event.stopPropagation(); openProjectPreviewFromElement(this)">
                            Quick View <i class="bi bi-eye"></i>
                        </span>
                        <span class="project-date">
                            <i class="bi bi-calendar3"></i> {{ project.completed_date|date:"M Y" }}
                        </span>
                    </div>
                </div>
            </div>
            <!-- Metrics Hover Card -->
            <div class="metrics-hover-card">
                <div class="metric-row">
                    <i class="bi bi-people"></i>
                    <div>
                        <span class="metric-label">Users</span>
                        <span class="metric-number" data-metric="users">{% cycle '250K' '1.2M' '500K' '800K' '150K' %}</span>
                    </div>
                </div>
                <div class="metric-row">
                    <i class="bi bi-cash-stack"></i>
                    <div>
                        <span class="metric-label">Revenue</span>
                        <span class="metric-number" data-metric="revenue">{% cycle '$5M+' '$12M+' '$8M+' '$15M+' '$3M+' %}</span>
                    </div>
                </div>
                <div class="metric-row">
                    <i class="bi bi-speedometer2"></i>
                    <div>
                        <span class="metric-label">Uptime</span>
                        <span class="metric-number" data-metric="performance">{% cycle '99.9%' '99.8%' '99.95%' '99.9%' '99.7%' %}</span>
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="empty-state" style="grid-column: 1/-1; text-align: center; padding: 80px 20px;">
            <div class="empty-icon">
                <i class="bi bi-folder-x"></i>
            </div>
            <h3 style="font-family: 'Syne'; font-size: 24px; color: rgba(255,255,255,0.9); margin: 20px 0 10px;">No additional projects found</h3>
            <p style="color: rgba(255,255,255,0.6);">Upload projects via the Admin Panel to showcase your work.</p>
        </div>
        {% endfor %}
    </div>
</section>

<!-- 4.5. Project Comparison Modal -->
<div id="comparison-modal" class="modal">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h2>Compare Projects</h2>
            <button class="modal-close" onclick="closeComparisonModal()">
                <i class="bi bi-x"></i>
            </button>
        </div>
        <div class="modal-body" id="comparison-body">
            <div class="comparison-grid" id="comparison-grid">
                <!-- Comparison items will be dynamically inserted here -->
            </div>
        </div>
    </div>
</div>

<!-- 4.6. Quick Preview Modal -->
<div id="preview-modal" class="modal">
    <div class="modal-content modal-medium">
        <div class="modal-header">
            <h2 id="preview-title">Project Preview</h2>
            <button class="modal-close" onclick="closePreviewModal()">
                <i class="bi bi-x"></i>
            </button>
        </div>
        <div class="modal-body" id="preview-body">
            <!-- Preview content will be dynamically inserted here -->
        </div>
    </div>
</div>

<!-- 5. Quote -->
<section class="quote-strip section-spacing enhanced-quote">
    <div class="quote-container glass-card">
        <div class="quote-icon">
            <i class="bi bi-quote"></i>
        </div>
        <blockquote class="quote-text">
            "WeTech didn't just build our app, they helped us define our business model through technology."
        </blockquote>
        <div class="quote-author">
            <div class="author-info">
                <strong class="author-name">CEO, Edward F Sunga</strong>
                <span class="author-role">Client Testimonial</span>
            </div>
            <div class="quote-rating">
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    // Global state
    let currentViewMode = 'grid';
    let comparisonMode = false;
    let selectedProjects = [];
    let chartInstances = {};

    // Filter Gallery (Enhanced with multiple filters)
    function filterGallery(category, btn) {
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        if (btn) btn.classList.add('active');

        applyAllFilters();
    }

    // Apply all active filters
    function applyAllFilters() {
        const categoryFilter = document.querySelector('.filter-btn.active')?.dataset.filter || 'all';
        const industryFilter = document.getElementById('industry-filter')?.value || 'all';
        const techFilter = document.getElementById('tech-filter')?.value || 'all';
        const yearFilter = document.getElementById('year-filter')?.value || 'all';
        const searchQuery = document.getElementById('project-search')?.value.toLowerCase() || '';

        const items = document.querySelectorAll('.gallery-item');
        items.forEach(item => {
            const matchesCategory = categoryFilter === 'all' || item.dataset.category === categoryFilter;
            const matchesIndustry = industryFilter === 'all' || item.dataset.industry === industryFilter;
            const matchesTech = techFilter === 'all' || (item.dataset.tech && item.dataset.tech.includes(techFilter));
            const matchesYear = yearFilter === 'all' || item.dataset.year === yearFilter;
            const matchesSearch = searchQuery === '' || 
                item.dataset.projectTitle.toLowerCase().includes(searchQuery) ||
                item.dataset.projectClient.toLowerCase().includes(searchQuery) ||
                item.dataset.projectDescription.toLowerCase().includes(searchQuery);

            if (matchesCategory && matchesIndustry && matchesTech && matchesYear && matchesSearch) {
                item.style.display = 'block';
                item.style.opacity = '0';
                setTimeout(() => item.style.opacity = '1', 50);
            } else {
                item.style.display = 'none';
            }
        });
    }

    // Search functionality
    document.addEventListener('DOMContentLoaded', function() {
        const searchInput = document.getElementById('project-search');
        if (searchInput) {
            searchInput.addEventListener('input', applyAllFilters);
        }

        // Advanced filter changes
        ['industry-filter', 'tech-filter', 'year-filter'].forEach(id => {
            const filter = document.getElementById(id);
            if (filter) {
                filter.addEventListener('change', applyAllFilters);
            }
        });

        // Initialize charts
        initializeCharts();

        // Initialize timeline animations
        initializeTimeline();

        // Initialize logos carousel
        initializeLogosCarousel();
    });

    // View Mode Toggle
    function setViewMode(mode, btn) {
        currentViewMode = mode;
        document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
        if (btn) btn.classList.add('active');

        const container = document.getElementById('gallery-container');
        if (!container) return;

        container.className = 'gallery-grid enhanced-gallery';
        
        if (mode === 'masonry') {
            container.classList.add('masonry-view');
        } else if (mode === 'list') {
            container.classList.add('list-view');
        } else {
            container.classList.add('grid-view');
        }
    }

    // Comparison Mode
    function toggleComparisonMode() {
        comparisonMode = !comparisonMode;
        const checkboxes = document.querySelectorAll('.comparison-checkbox');
        const controls = document.getElementById('comparison-controls');
        
        checkboxes.forEach(cb => {
            cb.style.display = comparisonMode ? 'block' : 'none';
        });
        
        if (controls) {
            controls.style.display = comparisonMode ? 'flex' : 'none';
        }

        if (!comparisonMode) {
            selectedProjects = [];
            document.querySelectorAll('.compare-check').forEach(cb => cb.checked = false);
            updateComparisonCount();
        }
    }

    function updateComparison(checkbox) {
        const projectCard = checkbox.closest('.gallery-item');
        const projectId = projectCard.dataset.projectId;

        if (checkbox.checked) {
            if (selectedProjects.length < 3 && !selectedProjects.includes(projectId)) {
                selectedProjects.push(projectId);
            } else if (selectedProjects.length >= 3) {
                checkbox.checked = false;
                alert('You can compare up to 3 projects at a time.');
                return;
            }
        } else {
            selectedProjects = selectedProjects.filter(id => id !== projectId);
        }

        updateComparisonCount();

        if (selectedProjects.length >= 2) {
            showComparisonButton();
        }
    }

    function updateComparisonCount() {
        const countEl = document.getElementById('compare-count');
        const compareBtn = document.getElementById('open-comparison-btn');
        
        if (countEl) {
            countEl.textContent = `${selectedProjects.length} selected`;
        }
        
        if (compareBtn) {
            if (selectedProjects.length >= 2) {
                compareBtn.style.display = 'inline-flex';
                compareBtn.textContent = `Compare ${selectedProjects.length} Projects`;
            } else {
                compareBtn.style.display = 'none';
            }
        }
    }

    function openComparisonModal() {
        if (selectedProjects.length < 2) {
            alert('Please select at least 2 projects to compare.');
            return;
        }

        const modal = document.getElementById('comparison-modal');
        const grid = document.getElementById('comparison-grid');
        if (!modal || !grid) return;

        grid.innerHTML = '';
        selectedProjects.forEach(projectId => {
            const projectCard = document.querySelector(`[data-project-id="${projectId}"]`);
            if (!projectCard) return;

            const comparisonItem = document.createElement('div');
            comparisonItem.className = 'comparison-item glass-card';
            comparisonItem.innerHTML = `
                <div class="comparison-image">
                    <img src="${projectCard.dataset.projectImage}" alt="${projectCard.dataset.projectTitle}">
                </div>
                <h4>${projectCard.dataset.projectTitle}</h4>
                <p class="comparison-client">${projectCard.dataset.projectClient}</p>
                <div class="comparison-metrics">
                    <div class="comparison-metric">
                        <span class="metric-label">Users</span>
                        <span class="metric-value">${projectCard.dataset.users}</span>
                    </div>
                    <div class="comparison-metric">
                        <span class="metric-label">Revenue</span>
                        <span class="metric-value">${projectCard.dataset.revenue}</span>
                    </div>
                    <div class="comparison-metric">
                        <span class="metric-label">Uptime</span>
                        <span class="metric-value">${projectCard.dataset.performance}</span>
                    </div>
                </div>
                <div class="comparison-tech">
                    <strong>Tech:</strong> ${projectCard.dataset.tech}
                </div>
                <a href="${projectCard.dataset.projectLink}" class="btn-primary btn-sm">View Details</a>
            `;
            grid.appendChild(comparisonItem);
        });

        modal.style.display = 'flex';
    }

    function closeComparisonModal() {
        const modal = document.getElementById('comparison-modal');
        if (modal) modal.style.display = 'none';
    }

    // Quick Preview Modal
    function openProjectPreview(projectId) {
        const projectCard = document.querySelector(`[data-project-id="${projectId}"]`);
        if (!projectCard) return;

        openProjectPreviewFromCard(projectCard);
    }

    function openProjectPreviewFromElement(element) {
        const projectId = element.getAttribute('data-project-id');
        if (projectId) {
            openProjectPreview(projectId);
        }
    }

    function openProjectPreviewFromCard(projectCard) {

        const modal = document.getElementById('preview-modal');
        const title = document.getElementById('preview-title');
        const body = document.getElementById('preview-body');
        
        if (!modal || !title || !body) return;

        title.textContent = projectCard.dataset.projectTitle;
        body.innerHTML = `
            <div class="preview-image">
                <img src="${projectCard.dataset.projectImage}" alt="${projectCard.dataset.projectTitle}">
            </div>
            <div class="preview-content">
                <div class="preview-meta">
                    <span class="preview-client"><i class="bi bi-building"></i> ${projectCard.dataset.projectClient}</span>
                    <span class="preview-date"><i class="bi bi-calendar"></i> ${projectCard.dataset.projectDate}</span>
                </div>
                <p class="preview-description">${projectCard.dataset.projectDescription}</p>
                <div class="preview-metrics-grid">
                    <div class="preview-metric">
                        <i class="bi bi-people"></i>
                        <div>
                            <span class="metric-value">${projectCard.dataset.users}</span>
                            <span class="metric-label">Users</span>
                        </div>
                    </div>
                    <div class="preview-metric">
                        <i class="bi bi-cash-stack"></i>
                        <div>
                            <span class="metric-value">${projectCard.dataset.revenue}</span>
                            <span class="metric-label">Revenue</span>
                        </div>
                    </div>
                    <div class="preview-metric">
                        <i class="bi bi-speedometer2"></i>
                        <div>
                            <span class="metric-value">${projectCard.dataset.performance}</span>
                            <span class="metric-label">Uptime</span>
                        </div>
                    </div>
                </div>
                <div class="preview-actions">
                    <a href="${projectCard.dataset.projectLink}" class="btn-primary">View Full Case Study</a>
                    ${projectCard.closest('.gallery-item').querySelector('[data-project-link]') ? 
                        `<a href="${projectCard.dataset.liveLink}" target="_blank" class="btn-secondary">Live Demo</a>` : ''}
                </div>
            </div>
        `;

        modal.style.display = 'flex';
    }

    function closePreviewModal() {
        const modal = document.getElementById('preview-modal');
        if (modal) modal.style.display = 'none';
    }

    // Handle project click (prevent default if in comparison mode or quick view)
    function handleProjectClick(event, element) {
        if (comparisonMode) {
            const checkbox = element.querySelector('.compare-check');
            if (checkbox) {
                checkbox.checked = !checkbox.checked;
                updateComparison(checkbox);
            }
            event.preventDefault();
            return false;
        }
        
        // Allow normal navigation if not in comparison mode
        return true;
    }

    // Initialize Charts (using Chart.js if available, otherwise simple visualizations)
    function initializeCharts() {
        // Category Chart
        const categoryCtx = document.getElementById('categoryChart');
        if (categoryCtx) {
            // Simple bar chart representation using CSS/Canvas
            createSimpleChart(categoryCtx, {
                labels: ['Web', 'Mobile', 'Backend'],
                data: [8, 6, 4],
                colors: ['#00f0ff', '#ff00d4', '#9d4edd']
            });
        }

        // Tech Chart
        const techCtx = document.getElementById('techChart');
        if (techCtx) {
            createSimpleChart(techCtx, {
                labels: ['Django', 'Flutter', 'Python', 'React'],
                data: [12, 8, 10, 5],
                colors: ['#00f0ff', '#ff00d4', '#9d4edd', '#00ff88']
            });
        }

        // Year Chart
        const yearCtx = document.getElementById('yearChart');
        if (yearCtx) {
            createSimpleChart(yearCtx, {
                labels: ['2023', '2024', '2025'],
                data: [5, 8, 10],
                colors: ['#00f0ff', '#ff00d4', '#9d4edd']
            });
        }
    }

    function createSimpleChart(canvas, config) {
        const ctx = canvas.getContext('2d');
        const width = canvas.width = canvas.offsetWidth;
        const height = canvas.height = canvas.offsetHeight;
        const maxValue = Math.max(...config.data);
        const barWidth = width / config.labels.length * 0.6;
        const barSpacing = width / config.labels.length * 0.4;
        const maxBarHeight = height * 0.7;

        ctx.clearRect(0, 0, width, height);

        config.data.forEach((value, index) => {
            const barHeight = (value / maxValue) * maxBarHeight;
            const x = index * (barWidth + barSpacing) + barSpacing / 2;
            const y = height - barHeight - 20;

            // Draw bar
            ctx.fillStyle = config.colors[index % config.colors.length];
            ctx.fillRect(x, y, barWidth, barHeight);

            // Draw label
            ctx.fillStyle = 'rgba(255,255,255,0.7)';
            ctx.font = '12px Outfit';
            ctx.textAlign = 'center';
            ctx.fillText(config.labels[index], x + barWidth / 2, height - 5);

            // Draw value
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 14px Outfit';
            ctx.fillText(value.toString(), x + barWidth / 2, y - 10);
        });
    }

    // Initialize Timeline Animations
    function initializeTimeline() {
        const timelineItems = document.querySelectorAll('.timeline-item');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-in');
                }
            });
        }, { threshold: 0.3 });

        timelineItems.forEach(item => observer.observe(item));
    }

    // Initialize Logos Carousel
    function initializeLogosCarousel() {
        const carousel = document.querySelector('.logos-carousel');
        if (!carousel) return;

        let scrollPosition = 0;
        const scrollSpeed = 1;

        function scrollCarousel() {
            scrollPosition += scrollSpeed;
            if (scrollPosition >= carousel.scrollWidth / 2) {
                scrollPosition = 0;
            }
            carousel.style.transform = `translateX(-${scrollPosition}px)`;
        }

        // Auto-scroll
        setInterval(scrollCarousel, 20);

        // Pause on hover
        carousel.addEventListener('mouseenter', () => {
            clearInterval(scrollCarousel);
        });
    }

    // Close modals on outside click
    window.onclick = function(event) {
        const comparisonModal = document.getElementById('comparison-modal');
        const previewModal = document.getElementById('preview-modal');
        
        if (event.target == comparisonModal) {
            closeComparisonModal();
        }
        if (event.target == previewModal) {
            closePreviewModal();
        }
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
        updateComparisonCount();
    });
</script>
{% endblock %}

{% block extra_css %}
<style>
    /* Enhanced Impact Stats */
    .enhanced-metric {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 20px;
        background: rgba(255,255,255,0.02);
        border: 1px solid rgba(255,255,255,0.05);
        border-radius: 16px;
        transition: 0.3s;
    }
    .enhanced-metric:hover {
        background: rgba(255,255,255,0.05);
        border-color: var(--primary);
        transform: translateY(-3px);
    }
    .metric-icon-wrapper {
        width: 50px;
        height: 50px;
        background: rgba(0, 240, 255, 0.1);
        border: 1px solid rgba(0, 240, 255, 0.2);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
    }
    .metric-icon-wrapper i {
        font-size: 24px;
        color: var(--primary);
    }
    .metric-content {
        flex: 1;
    }
    .intro-metrics {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        max-width: 1200px;
        margin: 0 auto;
    }
    .metric-divider {
        display: none;
    }

    /* Enhanced Featured Project */
    .enhanced-featured {
        position: relative;
        overflow: visible;
    }
    .project-header-meta {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 20px;
    }
    .featured-badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        background: rgba(243, 156, 18, 0.1);
        border: 1px solid rgba(243, 156, 18, 0.3);
        border-radius: 50px;
        color: #f39c12;
        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    .project-category-tag {
        display: inline-flex;
        align-items: center;
        padding: 8px 16px;
        background: rgba(0, 240, 255, 0.1);
        border: 1px solid rgba(0, 240, 255, 0.2);
        border-radius: 50px;
        color: var(--primary);
        font-size: 12px;
        font-weight: 600;
    }
    .project-description {
        font-size: 16px;
        color: rgba(255,255,255,0.7);
        line-height: 1.8;
        margin: 25px 0;
    }
    .project-meta-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin: 30px 0;
        padding: 25px;
        background: rgba(255,255,255,0.02);
        border-radius: 16px;
        border: 1px solid rgba(255,255,255,0.05);
    }
    .meta-item {
        display: flex;
        align-items: center;
        gap: 12px;
    }
    .meta-icon {
        width: 40px;
        height: 40px;
        background: rgba(0, 240, 255, 0.1);
        border: 1px solid rgba(0, 240, 255, 0.2);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
    }
    .meta-icon i {
        font-size: 18px;
        color: var(--primary);
    }
    .meta-content {
        display: flex;
        flex-direction: column;
        gap: 4px;
    }
    .meta-label {
        font-size: 11px;
        color: rgba(255,255,255,0.5);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    .meta-value {
        font-family: 'Syne';
        font-size: 15px;
        color: #fff;
    }
    .project-actions {
        display: flex;
        gap: 15px;
        margin-top: 30px;
    }
    .project-actions .btn-primary,
    .project-actions .btn-secondary {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 14px 28px;
    }

    /* Enhanced Project Image */
    .enhanced-image {
        position: relative;
        height: 450px;
        border-radius: 20px;
        overflow: hidden;
    }
    .image-wrapper {
        position: relative;
        width: 100%;
        height: 100%;
        border-radius: 20px;
        overflow: hidden;
    }
    .featured-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s;
    }
    .enhanced-featured:hover .featured-img {
        transform: scale(1.05);
    }
    .image-gradient-overlay {
        position: absolute;
        inset: 0;
        background: linear-gradient(135deg, rgba(0, 240, 255, 0.1), rgba(255, 0, 212, 0.1));
        pointer-events: none;
    }
    .image-badge {
        position: absolute;
        top: 20px;
        right: 20px;
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 18px;
        background: rgba(243, 156, 18, 0.9);
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(243, 156, 18, 0.3);
        border-radius: 50px;
        color: #fff;
        font-size: 12px;
        font-weight: 600;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    /* Enhanced Filter Buttons */
    .enhanced-filters {
        margin-bottom: 50px;
    }
    .enhanced-filters .filter-btn {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 12px 24px;
        background: rgba(255,255,255,0.02);
        border: 1px solid rgba(255,255,255,0.1);
        border-radius: 50px;
        color: rgba(255,255,255,0.6);
        font-family: 'Outfit', sans-serif;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s;
        position: relative;
        overflow: hidden;
    }
    .enhanced-filters .filter-btn::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(135deg, rgba(0, 240, 255, 0.1), rgba(255, 0, 212, 0.1));
        opacity: 0;
        transition: opacity 0.3s;
    }
    .enhanced-filters .filter-btn:hover::before,
    .enhanced-filters .filter-btn.active::before {
        opacity: 1;
    }
    .enhanced-filters .filter-btn span,
    .enhanced-filters .filter-btn i {
        position: relative;
        z-index: 1;
    }
    .enhanced-filters .filter-btn i {
        font-size: 16px;
    }
    .enhanced-filters .filter-btn:hover,
    .enhanced-filters .filter-btn.active {
        border-color: var(--primary);
        color: var(--primary);
        transform: translateY(-2px);
        box-shadow: 0 5px 20px rgba(0, 240, 255, 0.2);
    }

    /* Enhanced Gallery Grid */
    .enhanced-gallery {
        gap: 30px;
    }
    .enhanced-gallery-item {
        position: relative;
        border-radius: 20px;
        overflow: hidden;
        height: 350px;
        cursor: pointer;
        transition: all 0.4s;
        border: 1px solid rgba(255,255,255,0.05);
    }
    .gallery-image-wrapper {
        position: relative;
        width: 100%;
        height: 100%;
        overflow: hidden;
    }
    .gallery-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s;
    }
    .gallery-category-badge {
        position: absolute;
        top: 20px;
        left: 20px;
        width: 45px;
        height: 45px;
        background: rgba(0, 240, 255, 0.9);
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 240, 255, 0.3);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #0a0a12;
        font-size: 20px;
        z-index: 2;
    }
    .enhanced-gallery-item:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 50px rgba(0,0,0,0.4);
        border-color: var(--primary);
    }
    .enhanced-gallery-item:hover .gallery-img {
        transform: scale(1.15);
    }
    .enhanced-overlay {
        position: absolute;
        inset: 0;
        background: linear-gradient(to top, rgba(10, 10, 18, 0.98) 0%, rgba(10, 10, 18, 0.7) 50%, transparent 100%);
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        padding: 30px;
        opacity: 0;
        transition: opacity 0.4s;
    }
    .enhanced-gallery-item:hover .enhanced-overlay {
        opacity: 1;
    }
    .overlay-content {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }
    .overlay-top h4 {
        font-family: 'Syne';
        font-size: 22px;
        color: #fff;
        margin: 0 0 8px 0;
        line-height: 1.3;
    }
    .client-name {
        font-size: 14px;
        color: rgba(255,255,255,0.7);
        margin: 0;
    }
    .overlay-bottom {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding-top: 15px;
        border-top: 1px solid rgba(255,255,255,0.1);
    }
    .view-link {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-size: 13px;
        color: var(--primary);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        transition: gap 0.3s;
    }
    .enhanced-gallery-item:hover .view-link {
        gap: 12px;
    }
    .project-date {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: 12px;
        color: rgba(255,255,255,0.5);
    }

    /* Enhanced Quote Section */
    .enhanced-quote {
        margin-top: 80px;
    }
    .quote-container {
        padding: 60px 50px;
        text-align: center;
        position: relative;
        overflow: hidden;
    }
    .quote-container::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -10%;
        width: 300px;
        height: 300px;
        background: radial-gradient(circle, rgba(0, 240, 255, 0.1) 0%, transparent 70%);
        border-radius: 50%;
    }
    .quote-icon {
        font-size: 60px;
        color: var(--primary);
        margin-bottom: 30px;
        opacity: 0.3;
    }
    .quote-text {
        font-family: 'Syne';
        font-size: 32px;
        line-height: 1.6;
        color: #fff;
        max-width: 900px;
        margin: 0 auto 40px;
        font-style: italic;
        position: relative;
        z-index: 1;
    }
    .quote-author {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 30px;
        position: relative;
        z-index: 1;
    }
    .author-info {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
    }
    .author-name {
        font-family: 'Syne';
        font-size: 18px;
        color: var(--secondary);
        margin-bottom: 4px;
    }
    .author-role {
        font-size: 13px;
        color: rgba(255,255,255,0.5);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    .quote-rating {
        display: flex;
        gap: 5px;
    }
    .quote-rating i {
        font-size: 18px;
        color: #f39c12;
    }

    /* Empty State */
    .empty-state {
        text-align: center;
    }
    .empty-icon {
        font-size: 80px;
        color: rgba(255,255,255,0.2);
        margin-bottom: 20px;
    }

    /* Responsive Design */
    @media (max-width: 992px) {
        .project-meta-grid {
            grid-template-columns: 1fr;
        }
        .enhanced-image {
            height: 350px;
        }
        .quote-text {
            font-size: 24px;
        }
        .quote-author {
            flex-direction: column;
            gap: 20px;
        }
        .intro-metrics {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (max-width: 768px) {
        .enhanced-gallery-item {
            height: 300px;
        }
        .project-actions {
            flex-direction: column;
        }
        .project-actions .btn-primary,
        .project-actions .btn-secondary {
            width: 100%;
            justify-content: center;
        }
        .intro-metrics {
            grid-template-columns: 1fr;
        }
        .quote-container {
            padding: 40px 30px;
        }
    }

    /* =========================================
       NEW FEATURES STYLES
       ========================================= */

    /* Search & Advanced Filters */
    .portfolio-controls {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-bottom: 40px;
        align-items: center;
        justify-content: space-between;
    }
    .search-wrapper {
        position: relative;
        flex: 1;
        min-width: 250px;
        max-width: 400px;
    }
    .search-wrapper i {
        position: absolute;
        left: 18px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--primary);
        font-size: 18px;
    }
    .search-input {
        width: 100%;
        padding: 14px 18px 14px 50px;
        background: rgba(255,255,255,0.05);
        border: 1px solid rgba(255,255,255,0.1);
        border-radius: 50px;
        color: #fff;
        font-family: 'Outfit', sans-serif;
        font-size: 14px;
        transition: all 0.3s;
    }
    .search-input:focus {
        outline: none;
        border-color: var(--primary);
        background: rgba(255,255,255,0.08);
        box-shadow: 0 0 20px rgba(0, 240, 255, 0.2);
    }
    .advanced-filters {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
    }
    .filter-select {
        padding: 12px 20px;
        background: rgba(255,255,255,0.05);
        border: 1px solid rgba(255,255,255,0.1);
        border-radius: 50px;
        color: #fff;
        font-family: 'Outfit', sans-serif;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.3s;
    }
    .filter-select:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 20px rgba(0, 240, 255, 0.2);
    }
    .filter-select option {
        background: var(--dark-2);
        color: #fff;
    }

    /* View Toggle */
    .view-toggle-wrapper {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 40px;
        flex-wrap: wrap;
        gap: 20px;
    }
    .view-toggle {
        display: flex;
        gap: 10px;
        background: rgba(255,255,255,0.05);
        padding: 5px;
        border-radius: 50px;
        border: 1px solid rgba(255,255,255,0.1);
    }
    .view-btn {
        padding: 10px 20px;
        background: transparent;
        border: none;
        border-radius: 50px;
        color: rgba(255,255,255,0.6);
        font-family: 'Outfit', sans-serif;
        font-size: 14px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s;
    }
    .view-btn:hover,
    .view-btn.active {
        background: rgba(0, 240, 255, 0.1);
        color: var(--primary);
        border-color: var(--primary);
    }
    .comparison-controls {
        display: flex;
        align-items: center;
        gap: 15px;
    }
    .comparison-controls #compare-count {
        color: rgba(255,255,255,0.7);
        font-size: 14px;
    }
    .btn-sm {
        padding: 8px 16px;
        font-size: 13px;
    }

    /* View Modes */
    .gallery-grid.masonry-view {
        column-count: 3;
        column-gap: 30px;
    }
    .gallery-grid.masonry-view .gallery-item {
        break-inside: avoid;
        margin-bottom: 30px;
        height: auto;
        min-height: 300px;
    }
    .gallery-grid.list-view {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }
    .gallery-grid.list-view .gallery-item {
        display: flex;
        height: auto;
        min-height: 200px;
    }
    .gallery-grid.list-view .gallery-image-wrapper {
        width: 300px;
        flex-shrink: 0;
    }
    .gallery-grid.list-view .gallery-overlay {
        position: relative;
        opacity: 1;
        background: transparent;
        padding: 30px;
        flex: 1;
    }

    /* Tech Stack Tags */
    .tech-stack-tags {
        position: absolute;
        bottom: 20px;
        left: 20px;
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        z-index: 3;
    }
    .tech-tag {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 12px;
        background: rgba(0, 240, 255, 0.9);
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 240, 255, 0.3);
        border-radius: 20px;
        color: #0a0a12;
        font-size: 11px;
        font-weight: 600;
        z-index: 3;
    }
    .tech-tag i {
        font-size: 12px;
    }

    /* Project Tags */
    .project-tags {
        position: absolute;
        top: 70px;
        left: 20px;
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        z-index: 3;
    }
    .tag-tag {
        display: inline-block;
        padding: 4px 10px;
        background: rgba(255, 0, 212, 0.9);
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 0, 212, 0.3);
        border-radius: 12px;
        color: #fff;
        font-size: 10px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    .tag-tag.scalable {
        background: rgba(0, 240, 255, 0.9);
        border-color: rgba(0, 240, 255, 0.3);
    }
    .tag-tag.enterprise {
        background: rgba(157, 78, 221, 0.9);
        border-color: rgba(157, 78, 221, 0.3);
    }
    .tag-tag.startup {
        background: rgba(255, 0, 212, 0.9);
        border-color: rgba(255, 0, 212, 0.3);
    }
    .tag-tag.award {
        background: rgba(243, 156, 18, 0.9);
        border-color: rgba(243, 156, 18, 0.3);
    }

    /* Comparison Checkbox */
    .comparison-checkbox {
        position: absolute;
        top: 20px;
        right: 20px;
        z-index: 10;
    }
    .compare-check {
        width: 24px;
        height: 24px;
        cursor: pointer;
        accent-color: var(--primary);
    }

    /* Metrics Hover Card */
    .metrics-hover-card {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        opacity: 0;
        pointer-events: none;
        background: rgba(10, 10, 18, 0.95);
        -webkit-backdrop-filter: blur(20px);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(0, 240, 255, 0.3);
        border-radius: 16px;
        padding: 20px;
        min-width: 200px;
        z-index: 5;
        transition: all 0.3s;
    }
    .gallery-item:hover .metrics-hover-card {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
    }
    .metric-row {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 10px 0;
        border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    .metric-row:last-child {
        border-bottom: none;
    }
    .metric-row i {
        font-size: 20px;
        color: var(--primary);
    }
    .metric-row > div {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 4px;
    }
    .metric-label {
        font-size: 11px;
        color: rgba(255,255,255,0.5);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    .metric-number {
        font-family: 'Syne';
        font-size: 18px;
        color: #fff;
        font-weight: 600;
    }

    /* Quick Metrics in Overlay */
    .quick-metrics {
        display: flex;
        gap: 15px;
        margin-top: 15px;
    }
    .quick-metric {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 6px 12px;
        background: rgba(0, 240, 255, 0.1);
        border: 1px solid rgba(0, 240, 255, 0.2);
        border-radius: 20px;
    }
    .quick-metric i {
        font-size: 14px;
        color: var(--primary);
    }
    .quick-metric .metric-value {
        font-size: 12px;
        font-weight: 600;
        color: #fff;
    }

    /* Stats Visualization Section */
    .stats-visualization {
        padding: 60px 0;
    }
    .stats-charts-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 30px;
        max-width: 1400px;
        margin: 0 auto;
    }
    .chart-card {
        padding: 30px;
        text-align: center;
    }
    .chart-card h4 {
        font-family: 'Syne';
        font-size: 20px;
        margin-bottom: 25px;
        color: #fff;
    }
    .chart-container {
        height: 250px;
        position: relative;
    }
    .chart-container canvas {
        max-width: 100%;
        max-height: 100%;
    }
    .map-visualization {
        height: 200px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .map-stats {
        display: flex;
        gap: 40px;
    }
    .map-stat-item {
        text-align: center;
    }
    .map-stat-item i {
        font-size: 40px;
        color: var(--primary);
        margin-bottom: 15px;
        display: block;
    }
    .stat-value {
        display: block;
        font-family: 'Syne';
        font-size: 32px;
        color: #fff;
        font-weight: 700;
        margin-bottom: 5px;
    }
    .stat-label {
        font-size: 14px;
        color: rgba(255,255,255,0.6);
    }

    /* ROI Impact Section */
    .roi-impact {
        padding: 60px 0;
    }
    .roi-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 30px;
        max-width: 1400px;
        margin: 0 auto;
    }
    .roi-card {
        padding: 40px 30px;
        text-align: center;
        transition: transform 0.3s;
    }
    .roi-card:hover {
        transform: translateY(-10px);
    }
    .roi-icon {
        width: 80px;
        height: 80px;
        margin: 0 auto 25px;
        background: rgba(0, 240, 255, 0.1);
        border: 2px solid rgba(0, 240, 255, 0.3);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .roi-icon i {
        font-size: 40px;
        color: var(--primary);
    }
    .roi-card h3 {
        font-family: 'Syne';
        font-size: 22px;
        margin-bottom: 15px;
        color: #fff;
    }
    .roi-value {
        font-family: 'Syne';
        font-size: 48px;
        font-weight: 700;
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 15px;
    }
    .roi-description {
        color: rgba(255,255,255,0.7);
        margin-bottom: 25px;
        font-size: 14px;
    }
    .roi-bar {
        width: 100%;
        height: 8px;
        background: rgba(255,255,255,0.1);
        border-radius: 10px;
        overflow: hidden;
    }
    .roi-bar-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--primary), var(--secondary));
        border-radius: 10px;
        transition: width 1s ease;
    }

    /* Client Logos Carousel */
    .client-logos {
        padding: 60px 0;
        overflow: hidden;
    }
    .logos-carousel-wrapper {
        overflow: hidden;
        padding: 40px 0;
    }
    .logos-carousel {
        display: flex;
        gap: 30px;
        width: max-content;
        animation: scroll-logos 30s linear infinite;
    }
    @keyframes scroll-logos {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); }
    }
    .logo-item {
        width: 200px;
        height: 120px;
        flex-shrink: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        transition: transform 0.3s;
    }
    .logo-item:hover {
        transform: scale(1.1);
    }
    .logo-placeholder {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
        color: rgba(255,255,255,0.7);
    }
    .logo-placeholder i {
        font-size: 40px;
        color: var(--primary);
    }
    .logo-placeholder span {
        font-family: 'Syne';
        font-size: 16px;
    }

    /* Project Timeline */
    .project-timeline-section {
        padding: 60px 0;
    }
    .timeline-container {
        position: relative;
        max-width: 1200px;
        margin: 0 auto;
        padding: 40px 0;
    }
    .timeline-line {
        position: absolute;
        left: 50%;
        top: 0;
        bottom: 0;
        width: 3px;
        background: linear-gradient(180deg, var(--primary), var(--secondary));
        transform: translateX(-50%);
    }
    .timeline-item {
        position: relative;
        display: flex;
        align-items: center;
        margin-bottom: 60px;
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.6s ease;
    }
    .timeline-item.animate-in {
        opacity: 1;
        transform: translateY(0);
    }
    .timeline-item:nth-child(even) {
        flex-direction: row-reverse;
    }
    .timeline-marker {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        z-index: 2;
    }
    .marker-dot {
        width: 20px;
        height: 20px;
        background: var(--primary);
        border: 4px solid var(--dark-1);
        border-radius: 50%;
        box-shadow: 0 0 20px rgba(0, 240, 255, 0.5);
    }
    .marker-pulse {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 40px;
        height: 40px;
        background: var(--primary);
        border-radius: 50%;
        opacity: 0.3;
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.3; }
        50% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; }
    }
    .timeline-content {
        width: calc(50% - 40px);
        padding: 30px;
        margin: 0 20px;
    }
    .timeline-item:nth-child(even) .timeline-content {
        text-align: right;
    }
    .timeline-date {
        font-size: 12px;
        color: var(--primary);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 10px;
    }
    .timeline-content h4 {
        font-family: 'Syne';
        font-size: 24px;
        color: #fff;
        margin-bottom: 15px;
    }
    .timeline-content p {
        color: rgba(255,255,255,0.7);
        margin-bottom: 20px;
        line-height: 1.6;
    }
    .timeline-link {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        color: var(--primary);
        font-weight: 600;
        text-decoration: none;
        transition: gap 0.3s;
    }
    .timeline-link:hover {
        gap: 12px;
    }

    /* Industry Showcase */
    .industry-showcase {
        padding: 60px 0;
    }
    .industry-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 30px;
        max-width: 1400px;
        margin: 0 auto;
    }
    .industry-card {
        padding: 40px 30px;
        text-align: center;
        transition: all 0.3s;
        cursor: pointer;
    }
    .industry-card:hover {
        transform: translateY(-10px);
        border-color: var(--primary);
    }
    .industry-icon {
        width: 70px;
        height: 70px;
        margin: 0 auto 25px;
        background: rgba(0, 240, 255, 0.1);
        border: 2px solid rgba(0, 240, 255, 0.3);
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .industry-icon i {
        font-size: 35px;
        color: var(--primary);
    }
    .industry-card h3 {
        font-family: 'Syne';
        font-size: 24px;
        color: #fff;
        margin-bottom: 15px;
    }
    .industry-card p {
        color: rgba(255,255,255,0.7);
        margin-bottom: 25px;
        line-height: 1.6;
    }
    .industry-stats {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        padding-top: 25px;
        border-top: 1px solid rgba(255,255,255,0.1);
    }
    .industry-count,
    .industry-metric {
        font-weight: 600;
        color: var(--primary);
        font-size: 14px;
    }
    .industry-separator {
        color: rgba(255,255,255,0.3);
    }

    /* Modals */
    .modal {
        display: none;
        position: fixed;
        z-index: 10000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(10px);
        align-items: center;
        justify-content: center;
        padding: 20px;
    }
    .modal-content {
        background: var(--dark-2);
        border: 1px solid rgba(255,255,255,0.1);
        border-radius: 20px;
        max-width: 900px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: 0 20px 60px rgba(0,0,0,0.5);
    }
    .modal-large {
        max-width: 1400px;
    }
    .modal-medium {
        max-width: 800px;
    }
    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 30px;
        border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    .modal-header h2 {
        font-family: 'Syne';
        font-size: 28px;
        color: #fff;
        margin: 0;
    }
    .modal-close {
        background: transparent;
        border: none;
        color: rgba(255,255,255,0.7);
        font-size: 28px;
        cursor: pointer;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: all 0.3s;
    }
    .modal-close:hover {
        background: rgba(255,255,255,0.1);
        color: #fff;
    }
    .modal-body {
        padding: 30px;
    }

    /* Comparison Modal */
    .comparison-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
    }
    .comparison-item {
        padding: 30px;
    }
    .comparison-image {
        width: 100%;
        height: 200px;
        border-radius: 12px;
        overflow: hidden;
        margin-bottom: 20px;
    }
    .comparison-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    .comparison-item h4 {
        font-family: 'Syne';
        font-size: 22px;
        color: #fff;
        margin-bottom: 10px;
    }
    .comparison-client {
        color: rgba(255,255,255,0.7);
        margin-bottom: 20px;
        font-size: 14px;
    }
    .comparison-metrics {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-bottom: 20px;
        padding: 20px;
        background: rgba(255,255,255,0.05);
        border-radius: 12px;
    }
    .comparison-metric {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .comparison-metric .metric-label {
        color: rgba(255,255,255,0.6);
        font-size: 14px;
    }
    .comparison-metric .metric-value {
        font-family: 'Syne';
        font-size: 18px;
        color: var(--primary);
        font-weight: 600;
    }
    .comparison-tech {
        color: rgba(255,255,255,0.7);
        font-size: 14px;
        margin-bottom: 20px;
    }

    /* Preview Modal */
    .preview-image {
        width: 100%;
        height: 400px;
        border-radius: 12px;
        overflow: hidden;
        margin-bottom: 30px;
    }
    .preview-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    .preview-meta {
        display: flex;
        gap: 30px;
        margin-bottom: 25px;
        flex-wrap: wrap;
    }
    .preview-client,
    .preview-date {
        display: flex;
        align-items: center;
        gap: 8px;
        color: rgba(255,255,255,0.7);
        font-size: 14px;
    }
    .preview-client i,
    .preview-date i {
        color: var(--primary);
    }
    .preview-description {
        color: rgba(255,255,255,0.8);
        line-height: 1.8;
        margin-bottom: 30px;
        font-size: 16px;
    }
    .preview-metrics-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin-bottom: 30px;
    }
    .preview-metric {
        padding: 20px;
        background: rgba(255,255,255,0.05);
        border-radius: 12px;
        text-align: center;
        border: 1px solid rgba(255,255,255,0.1);
    }
    .preview-metric i {
        font-size: 32px;
        color: var(--primary);
        margin-bottom: 10px;
        display: block;
    }
    .preview-metric .metric-value {
        display: block;
        font-family: 'Syne';
        font-size: 24px;
        color: #fff;
        font-weight: 700;
        margin-bottom: 5px;
    }
    .preview-metric .metric-label {
        font-size: 12px;
        color: rgba(255,255,255,0.6);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    .preview-actions {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
    }

    /* Responsive Updates */
    @media (max-width: 992px) {
        .portfolio-controls {
            flex-direction: column;
            align-items: stretch;
        }
        .search-wrapper {
            max-width: 100%;
        }
        .timeline-line {
            left: 30px;
        }
        .timeline-item {
            flex-direction: row !important;
        }
        .timeline-marker {
            left: 30px;
        }
        .timeline-content {
            width: calc(100% - 80px);
            margin-left: 80px;
            text-align: left !important;
        }
        .gallery-grid.masonry-view {
            column-count: 2;
        }
    }

    @media (max-width: 768px) {
        .stats-charts-grid,
        .roi-grid,
        .industry-grid {
            grid-template-columns: 1fr;
        }
        .preview-metrics-grid {
            grid-template-columns: 1fr;
        }
        .gallery-grid.masonry-view {
            column-count: 1;
        }
        .gallery-grid.list-view .gallery-image-wrapper {
            width: 150px;
        }
        .comparison-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}