{% extends 'dashboard_base.html' %}
{% load static %}
{% block dashboard_content %}
<div style="max-width: 1200px; margin: 0 auto; padding-bottom: 50px;">
    
    <!-- Header -->
    <div class="settings-header">
        <div>
            <h2 style="color: #fff; font-family: 'Syne'; margin: 0; font-size: 32px;">Settings</h2>
            <p style="color: rgba(255,255,255,0.6); margin-top: 5px;">Manage your account and preferences</p>
        </div>
        <div class="profile-picture-container">
            <div class="profile-picture" title="{{ user.get_full_name|default:user.username }}">
                {% if user.first_name or user.last_name %}
                    <span class="profile-initials">{{ user.first_name|first|upper }}{{ user.last_name|first|upper }}</span>
                {% else %}
                    <span class="profile-initials">{{ user.username|first|upper }}</span>
                {% endif %}
            </div>
            <div class="profile-info">
                <div class="profile-name">{{ user.get_full_name|default:user.username }}</div>
                <div class="profile-email">{{ user.email }}</div>
            </div>
        </div>
    </div>

    {% if messages %}
    {% for message in messages %}
    <div class="alert {% if message.tags == 'success' %}alert-success{% else %}alert-error{% endif %}">
        <i class="bi {% if message.tags == 'success' %}bi-check-circle-fill{% else %}bi-exclamation-circle-fill{% endif %}"></i>
        {{ message }}
    </div>
    {% endfor %}
    {% endif %}

    <!-- Settings Tabs -->
    <div class="settings-container">
        <!-- Sidebar Navigation -->
        <div class="settings-sidebar">
            <nav class="settings-nav">
                <a href="?tab=profile" class="settings-nav-item {% if active_tab == 'profile' %}active{% endif %}" onclick="switchTab('profile', this); return false;">
                    <i class="bi bi-person"></i>
                    <span>Profile</span>
                </a>
                <a href="?tab=security" class="settings-nav-item {% if active_tab == 'security' %}active{% endif %}" onclick="switchTab('security', this); return false;">
                    <i class="bi bi-shield-lock"></i>
                    <span>Security</span>
                </a>
                <a href="?tab=preferences" class="settings-nav-item {% if active_tab == 'preferences' %}active{% endif %}" onclick="switchTab('preferences', this); return false;">
                    <i class="bi bi-gear"></i>
                    <span>Preferences</span>
                </a>
                <a href="?tab=notifications" class="settings-nav-item {% if active_tab == 'notifications' %}active{% endif %}" onclick="switchTab('notifications', this); return false;">
                    <i class="bi bi-bell"></i>
                    <span>Notifications</span>
                </a>
                <a href="?tab=business" class="settings-nav-item {% if active_tab == 'business' %}active{% endif %}" onclick="switchTab('business', this); return false;">
                    <i class="bi bi-building"></i>
                    <span>Business</span>
                </a>
                <a href="?tab=integrations" class="settings-nav-item {% if active_tab == 'integrations' %}active{% endif %}" onclick="switchTab('integrations', this); return false;">
                    <i class="bi bi-plug"></i>
                    <span>Integrations</span>
                </a>
                <a href="?tab=advanced" class="settings-nav-item {% if active_tab == 'advanced' %}active{% endif %}" onclick="switchTab('advanced', this); return false;">
                    <i class="bi bi-sliders"></i>
                    <span>Advanced</span>
                </a>
            </nav>
        </div>

        <!-- Settings Content -->
        <div class="settings-content">
            
            <!-- Profile Tab -->
            <div id="tab-profile" class="settings-tab {% if active_tab == 'profile' %}active{% endif %}">
                <div class="settings-section glass-card">
                    <div class="section-header">
                        <h3><i class="bi bi-person"></i> Profile Information</h3>
                        <p>Update your personal information and account details</p>
                    </div>
                    <form method="POST" class="settings-form">
                        {% csrf_token %}
                        <input type="hidden" name="form_type" value="profile">
                        
                        <div class="form-group">
                            <label>First Name</label>
                            {{ profile_form.first_name }}
                        </div>
                        
                        <div class="form-group">
                            <label>Last Name</label>
                            {{ profile_form.last_name }}
                        </div>
                        
                        <div class="form-group">
                            <label>Email Address <span class="required">*</span></label>
                            {{ profile_form.email }}
                            <small class="field-hint">This will be used for account-related notifications</small>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn-primary">
                                <i class="bi bi-check-circle"></i> Save Changes
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Security Tab -->
            <div id="tab-security" class="settings-tab {% if active_tab == 'security' %}active{% endif %}">
                <div class="settings-section glass-card">
                    <div class="section-header">
                        <h3><i class="bi bi-shield-lock"></i> Change Password</h3>
                        <p>Update your password to keep your account secure</p>
                    </div>
                    <form method="POST" class="settings-form">
                        {% csrf_token %}
                        <input type="hidden" name="form_type" value="password">
                        
                        <div class="form-group">
                            <label>Current Password <span class="required">*</span></label>
                            {{ password_form.current_password }}
                        </div>
                        
                        <div class="form-group">
                            <label>New Password <span class="required">*</span></label>
                            {{ password_form.new_password }}
                            <small class="field-hint">Must be at least 8 characters long</small>
                        </div>
                        
                        <div class="form-group">
                            <label>Confirm New Password <span class="required">*</span></label>
                            {{ password_form.confirm_password }}
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn-primary">
                                <i class="bi bi-key"></i> Update Password
                            </button>
                        </div>
                    </form>
                </div>

                <div class="settings-section glass-card">
                    <div class="section-header">
                        <h3><i class="bi bi-shield-check"></i> Security Features</h3>
                        <p>Enhance your account security</p>
                    </div>
                    <div class="security-features">
                        <div class="security-item">
                            <div class="security-info">
                                <h4>Two-Factor Authentication</h4>
                                <p>Add an extra layer of security to your account</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="security-item">
                            <div class="security-info">
                                <h4>Login Notifications</h4>
                                <p>Get notified when someone logs into your account</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Preferences Tab -->
            <div id="tab-preferences" class="settings-tab {% if active_tab == 'preferences' %}active{% endif %}">
                <div class="settings-section glass-card">
                    <div class="section-header">
                        <h3><i class="bi bi-gear"></i> Application Preferences</h3>
                        <p>Customize your dashboard experience</p>
                    </div>
                    <form method="POST" class="settings-form">
                        {% csrf_token %}
                        <input type="hidden" name="form_type" value="preferences">
                        
                        <div class="form-group">
                            <label>Theme</label>
                            <select name="theme" class="cyber-input">
                                <option value="dark" {% if theme == 'dark' %}selected{% endif %}>Dark</option>
                                <option value="light" {% if theme == 'light' %}selected{% endif %}>Light</option>
                                <option value="auto" {% if theme == 'auto' %}selected{% endif %}>Auto (System)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Items Per Page</label>
                            <select name="items_per_page" class="cyber-input">
                                <option value="10" {% if items_per_page == '10' %}selected{% endif %}>10</option>
                                <option value="20" {% if items_per_page == '20' %}selected{% endif %}>20</option>
                                <option value="50" {% if items_per_page == '50' %}selected{% endif %}>50</option>
                                <option value="100" {% if items_per_page == '100' %}selected{% endif %}>100</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Date Format</label>
                            <select name="date_format" class="cyber-input">
                                <option value="Y-m-d" {% if date_format == 'Y-m-d' %}selected{% endif %}>YYYY-MM-DD</option>
                                <option value="m/d/Y" {% if date_format == 'm/d/Y' %}selected{% endif %}>MM/DD/YYYY</option>
                                <option value="d/m/Y" {% if date_format == 'd/m/Y' %}selected{% endif %}>DD/MM/YYYY</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Time Format</label>
                            <select name="time_format" class="cyber-input">
                                <option value="12" {% if time_format == '12' %}selected{% endif %}>12-hour</option>
                                <option value="24" {% if time_format == '24' %}selected{% endif %}>24-hour</option>
                            </select>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn-primary">
                                <i class="bi bi-check-circle"></i> Save Preferences
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Notifications Tab -->
            <div id="tab-notifications" class="settings-tab {% if active_tab == 'notifications' %}active{% endif %}">
                <div class="settings-section glass-card">
                    <div class="section-header">
                        <h3><i class="bi bi-bell"></i> Notification Preferences</h3>
                        <p>Choose how you want to receive notifications</p>
                    </div>
                    <form method="POST" class="settings-form">
                        {% csrf_token %}
                        <input type="hidden" name="form_type" value="notifications">
                        
                        <div class="notification-group">
                            <div class="notification-item">
                                <div class="notification-info">
                                    <h4>Email Notifications</h4>
                                    <p>Receive notifications via email</p>
        </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" name="email_notifications" {% if email_notifications %}checked{% endif %}>
                                    <span class="toggle-slider"></span>
                                </label>
        </div>
                            
                            <div class="notification-item">
                                <div class="notification-info">
                                    <h4>SMS Notifications</h4>
                                    <p>Receive notifications via SMS</p>
        </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" name="sms_notifications" {% if sms_notifications %}checked{% endif %}>
                                    <span class="toggle-slider"></span>
            </label>
        </div>
                            
                            <div class="form-group">
                                <label>Email Digest Frequency</label>
                                <select name="digest_frequency" class="cyber-input">
                                    <option value="realtime" {% if digest_frequency == 'realtime' %}selected{% endif %}>Real-time</option>
                                    <option value="daily" {% if digest_frequency == 'daily' %}selected{% endif %}>Daily Digest</option>
                                    <option value="weekly" {% if digest_frequency == 'weekly' %}selected{% endif %}>Weekly Digest</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn-primary">
                                <i class="bi bi-check-circle"></i> Save Notifications
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Business Tab -->
            <div id="tab-business" class="settings-tab {% if active_tab == 'business' %}active{% endif %}">
                <div class="settings-section glass-card">
                    <div class="section-header">
                        <h3><i class="bi bi-building"></i> Business Information</h3>
                        <p>Update your company or business details</p>
                    </div>
                    <form method="POST" class="settings-form">
                        {% csrf_token %}
                        <input type="hidden" name="form_type" value="business">
                        
                        <div class="form-group">
                            <label>Company Name <span class="required">*</span></label>
                            <input type="text" name="company_name" class="cyber-input" value="{% if company_name %}{{ company_name }}{% else %}{{ business_settings.company_name }}{% endif %}" placeholder="Your Company Name" required>
                            <small class="field-hint">This name will appear in the header, footer, and dashboard</small>
                        </div>
                        
                        <div class="form-group">
                            <label>Company Email</label>
                            <input type="email" name="company_email" class="cyber-input" value="{% if company_email %}{{ company_email }}{% else %}{{ business_settings.company_email }}{% endif %}" placeholder="company@example.com">
                        </div>
                        
                        <div class="form-group">
                            <label>Company Phone</label>
                            <input type="text" name="company_phone" class="cyber-input" value="{% if company_phone %}{{ company_phone }}{% else %}{{ business_settings.company_phone }}{% endif %}" placeholder="+255 XXX XXX XXX">
                        </div>
                        
                        <div class="form-group">
                            <label>Company Address</label>
                            <textarea name="company_address" class="cyber-input" rows="3" placeholder="Street address, City, Country">{% if company_address %}{{ company_address }}{% else %}{{ business_settings.company_address }}{% endif %}</textarea>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn-primary">
                                <i class="bi bi-check-circle"></i> Save Business Info
                            </button>
                        </div>
    </form>
</div>
            </div>

            <!-- Integrations Tab -->
            <div id="tab-integrations" class="settings-tab {% if active_tab == 'integrations' %}active{% endif %}">
                <div class="settings-section glass-card">
                    <div class="section-header">
                        <h3><i class="bi bi-plug"></i> Payment Gateways</h3>
                        <p>Configure payment gateway API keys</p>
                    </div>
                    <div class="integration-list">
                        <div class="integration-item">
                            <div class="integration-info">
                                <h4><i class="bi bi-credit-card"></i> Pesapal</h4>
                                <p>Configure Pesapal payment gateway</p>
                                <small>Consumer Key: 4GhwfZhAIHWFcfM+5SuXaplx3FOTwIkY</small>
                            </div>
                            <button class="btn-secondary" onclick="alert('Payment gateway configuration should be done in settings.py for security')">
                                Configure
                            </button>
                        </div>
                        
                        <div class="integration-item">
                            <div class="integration-info">
                                <h4><i class="bi bi-wallet2"></i> Azampay</h4>
                                <p>Configure Azampay payment gateway</p>
                                <small>Configure in settings.py</small>
                            </div>
                            <button class="btn-secondary" onclick="alert('Payment gateway configuration should be done in settings.py for security')">
                                Configure
                            </button>
                        </div>
                    </div>
                </div>

                <div class="settings-section glass-card">
                    <div class="section-header">
                        <h3><i class="bi bi-envelope-at"></i> Email Service</h3>
                        <p>Configure email sending service</p>
                    </div>
                    <div class="integration-item">
                        <div class="integration-info">
                            <h4><i class="bi bi-mailbox"></i> SMTP Settings</h4>
                            <p>Configure SMTP server for sending emails</p>
                            <small>Configure SMTP settings in settings.py (EMAIL_BACKEND, EMAIL_HOST, etc.)</small>
                        </div>
                        <button class="btn-secondary" onclick="alert('Email service configuration should be done in settings.py')">
                            Configure
                        </button>
                    </div>
                </div>
            </div>

            <!-- Advanced Tab -->
            <div id="tab-advanced" class="settings-tab {% if active_tab == 'advanced' %}active{% endif %}">
                <div class="settings-section glass-card">
                    <div class="section-header">
                        <h3><i class="bi bi-download"></i> Data Export</h3>
                        <p>Export your data for backup or migration</p>
                    </div>
                    <div class="advanced-actions">
                        <button class="btn-secondary" onclick="exportData('csv')">
                            <i class="bi bi-file-earmark-spreadsheet"></i> Export to CSV
                        </button>
                        <button class="btn-secondary" onclick="exportData('json')">
                            <i class="bi bi-filetype-json"></i> Export to JSON
                        </button>
                    </div>
                </div>

                <div class="settings-section glass-card">
                    <div class="section-header">
                        <h3><i class="bi bi-trash"></i> Danger Zone</h3>
                        <p>Irreversible and destructive actions</p>
                    </div>
                    <div class="danger-zone">
                        <div class="danger-item">
                            <div>
                                <h4>Clear Cache</h4>
                                <p>Clear all cached data</p>
                            </div>
                            <button class="btn-danger" onclick="if(confirm('Clear all cache? This cannot be undone.')) alert('Cache cleared')">
                                Clear Cache
                            </button>
                        </div>
                        
                        <div class="danger-item">
                            <div>
                                <h4>Delete Account</h4>
                                <p>Permanently delete your account and all associated data</p>
                            </div>
                            <button class="btn-danger" onclick="if(confirm('Are you absolutely sure? This will permanently delete your account and all data. This action cannot be undone.')) alert('Account deletion would require additional backend implementation')">
                                Delete Account
                            </button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

</div>

<style>
/* Settings Page Styles */
.settings-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    margin-bottom: 30px;
}

.profile-picture-container {
    display: flex;
    align-items: center;
    gap: 15px;
}

.profile-picture {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: linear-gradient(135deg, #00d2ff 0%, #7000ff 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    border: 3px solid rgba(0, 240, 255, 0.3);
    box-shadow: 0 4px 15px rgba(0, 240, 255, 0.2);
    cursor: pointer;
    transition: all 0.3s ease;
    flex-shrink: 0;
}

.profile-picture:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 20px rgba(0, 240, 255, 0.4);
    border-color: rgba(0, 240, 255, 0.5);
}

.profile-initials {
    color: #fff;
    font-size: 20px;
    font-weight: 700;
    font-family: 'Syne', sans-serif;
    letter-spacing: 0.5px;
}

.profile-info {
    display: flex;
    flex-direction: column;
    gap: 3px;
}

.profile-name {
    color: #fff;
    font-size: 16px;
    font-weight: 600;
    font-family: 'Outfit', sans-serif;
}

.profile-email {
    color: rgba(255, 255, 255, 0.6);
    font-size: 13px;
    font-family: 'Outfit', sans-serif;
}

@media (max-width: 768px) {
    .settings-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 20px;
    }
    
    .profile-picture-container {
        width: 100%;
        justify-content: flex-start;
    }
}

.alert {
    padding: 15px 20px;
    border-radius: 8px;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.alert-success {
    background: rgba(46, 204, 113, 0.15);
    border: 1px solid rgba(46, 204, 113, 0.3);
    color: #2ecc71;
}

.alert-error {
    background: rgba(231, 76, 60, 0.15);
    border: 1px solid rgba(231, 76, 60, 0.3);
    color: #e74c3c;
}

.settings-container {
    display: grid;
    grid-template-columns: 250px 1fr;
    gap: 30px;
}

/* Sidebar */
.settings-sidebar {
    position: sticky;
    top: 20px;
    height: fit-content;
}

.settings-nav {
    display: flex;
    flex-direction: column;
    gap: 5px;
    background: rgba(255,255,255,0.02);
    border: 1px solid rgba(255,255,255,0.05);
    border-radius: 16px;
    padding: 10px;
}

.settings-nav-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    border-radius: 8px;
    color: rgba(255,255,255,0.7);
    text-decoration: none;
    transition: 0.3s;
    font-size: 14px;
}

.settings-nav-item:hover {
    background: rgba(255,255,255,0.05);
    color: #00d2ff;
}

.settings-nav-item.active {
    background: rgba(0, 210, 255, 0.15);
    color: #00d2ff;
    border-left: 3px solid #00d2ff;
}

.settings-nav-item i {
    font-size: 18px;
}

/* Content */
.settings-content {
    min-height: 500px;
}

.settings-tab {
    display: none;
}

.settings-tab.active {
    display: block;
}

.settings-section {
    padding: 30px;
    margin-bottom: 25px;
    border-radius: 16px;
}

.section-header {
    margin-bottom: 30px;
    padding-bottom: 20px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
}

.section-header h3 {
    color: #fff;
    font-family: 'Syne', sans-serif;
    font-size: 20px;
    margin: 0 0 8px 0;
    display: flex;
    align-items: center;
    gap: 10px;
}

.section-header p {
    color: rgba(255,255,255,0.6);
    margin: 0;
    font-size: 14px;
}

.settings-form {
    max-width: 600px;
}

.form-group {
    margin-bottom: 25px;
}

.form-group label {
    display: block;
    color: rgba(255,255,255,0.9);
    font-weight: 500;
    margin-bottom: 10px;
    font-size: 14px;
}

.required {
    color: #ff4757;
}

.field-hint {
    display: block;
    color: rgba(255,255,255,0.4);
    font-size: 12px;
    margin-top: 6px;
}

.cyber-input {
    width: 100%;
    padding: 12px 15px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px;
    color: white;
    font-family: 'Outfit', sans-serif;
    font-size: 14px;
    outline: none;
    transition: 0.3s;
}

.cyber-input:focus {
    border-color: #00d2ff;
    background: rgba(0, 210, 255, 0.05);
}

.form-actions {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid rgba(255,255,255,0.1);
}

.btn-primary {
    padding: 12px 24px;
    border-radius: 8px;
    border: none;
    background: linear-gradient(90deg, #00d2ff, #7000ff);
    color: #fff;
    font-weight: 600;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    transition: 0.3s;
}

.btn-primary:hover {
    opacity: 0.9;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 210, 255, 0.3);
}

.btn-secondary {
    padding: 10px 20px;
    border-radius: 8px;
    border: none;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    color: #fff;
    font-weight: 500;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    transition: 0.3s;
}

.btn-secondary:hover {
    background: rgba(255,255,255,0.1);
    border-color: #00d2ff;
    color: #00d2ff;
}

.btn-danger {
    padding: 10px 20px;
    border-radius: 8px;
    border: none;
    background: rgba(231, 76, 60, 0.2);
    border: 1px solid rgba(231, 76, 60, 0.3);
    color: #e74c3c;
    font-weight: 500;
    cursor: pointer;
    transition: 0.3s;
}

.btn-danger:hover {
    background: rgba(231, 76, 60, 0.3);
}

/* Security Features */
.security-features {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.security-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: rgba(255,255,255,0.02);
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.05);
}

.security-info h4 {
    color: #fff;
    font-size: 16px;
    margin: 0 0 5px 0;
}

.security-info p {
    color: rgba(255,255,255,0.6);
    font-size: 13px;
    margin: 0;
}

/* Toggle Switch */
.toggle-switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 26px;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(255,255,255,0.1);
    transition: 0.3s;
    border-radius: 26px;
}

.toggle-slider:before {
    position: absolute;
    content: "";
    height: 20px;
    width: 20px;
    left: 3px;
    bottom: 3px;
    background-color: #fff;
    transition: 0.3s;
    border-radius: 50%;
}

.toggle-switch input:checked + .toggle-slider {
    background-color: #00d2ff;
}

.toggle-switch input:checked + .toggle-slider:before {
    transform: translateX(24px);
}

/* Notifications */
.notification-group {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.notification-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: rgba(255,255,255,0.02);
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.05);
}

.notification-info h4 {
    color: #fff;
    font-size: 16px;
    margin: 0 0 5px 0;
}

.notification-info p {
    color: rgba(255,255,255,0.6);
    font-size: 13px;
    margin: 0;
}

/* Integrations */
.integration-list {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.integration-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: rgba(255,255,255,0.02);
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.05);
}

.integration-info h4 {
    color: #fff;
    font-size: 16px;
    margin: 0 0 5px 0;
    display: flex;
    align-items: center;
    gap: 10px;
}

.integration-info p {
    color: rgba(255,255,255,0.6);
    font-size: 13px;
    margin: 0 0 5px 0;
}

.integration-info small {
    color: rgba(255,255,255,0.4);
    font-size: 12px;
}

/* Advanced */
.advanced-actions {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
}

.danger-zone {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.danger-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: rgba(231, 76, 60, 0.05);
    border-radius: 12px;
    border: 1px solid rgba(231, 76, 60, 0.2);
}

.danger-item h4 {
    color: #e74c3c;
    font-size: 16px;
    margin: 0 0 5px 0;
}

.danger-item p {
    color: rgba(255,255,255,0.6);
    font-size: 13px;
    margin: 0;
}

@media (max-width: 968px) {
    .settings-container {
        grid-template-columns: 1fr;
    }
    .settings-sidebar {
        position: relative;
        top: 0;
    }
    .settings-nav {
        flex-direction: row;
        overflow-x: auto;
    }
    .settings-nav-item {
        white-space: nowrap;
    }
}
</style>

<script>
function switchTab(tabName, element) {
    // Hide all tabs
    document.querySelectorAll('.settings-tab').forEach(function(tab) {
        tab.classList.remove('active');
    });
    
    // Show selected tab
    const selectedTab = document.getElementById('tab-' + tabName);
    if (selectedTab) {
        selectedTab.classList.add('active');
    }
    
    // Update nav items
    document.querySelectorAll('.settings-nav-item').forEach(function(item) {
        item.classList.remove('active');
    });
    if (element) {
        element.classList.add('active');
    }
}

function exportData(format) {
    alert('Data export to ' + format.toUpperCase() + ' would be implemented with backend endpoint');
}

// Initialize active tab on page load
document.addEventListener('DOMContentLoaded', function() {
    const activeTab = '{{ active_tab }}';
    if (activeTab) {
        switchTab(activeTab);
    }
});
</script>
{% endblock %}
